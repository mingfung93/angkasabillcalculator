<html>

<head>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,400;1,300&display=swap" rel="stylesheet">


    <style>
        body {
            font-family: roboto;
            text-align: center
        }
    </style>
    <script>
        function calculate(totalUsageInRM, rate1usage, rate2usage, rate3usage, rate4usage, rate5usage, discountrate, lastnumroom1, nownumroom1, lastnumroom2, nownumroom2, lastnumroom3, nownumroom3) {

            var rate1, rate2, rate3, rate4, rate5;
            rate1 = 0.175;
            rate2 = 0.185;
            rate3 = 0.330;
            rate4 = 0.445;
            rate5 = 0.450;

            totalKWHUsageInRM = (rate1 * rate1usage) + (rate2 * rate2usage) + (rate3 * rate3usage) + (rate4 * rate4usage) + (rate5 * rate5usage);
            var totalKWHUsageInRMAfterDiscount = totalKWHUsageInRM - (totalKWHUsageInRM * (discountrate / 100));
            var servicetax = totalUsageInRM - totalKWHUsageInRMAfterDiscount;


            var econusageROOM1 = nownumroom1 - lastnumroom1;
            var econusageROOM2 = nownumroom2 - lastnumroom2;
            var econusageROOM3 = nownumroom3 - lastnumroom3;
            var rate4_and_rate5_total_averagePricePerUnit = 0.4475;

            var econusageROOM1RM = econusageROOM1 * rate4_and_rate5_total_averagePricePerUnit;
            var econusageROOM2RM = econusageROOM2 * rate4_and_rate5_total_averagePricePerUnit;
            var econusageROOM3RM = econusageROOM3 * rate4_and_rate5_total_averagePricePerUnit;

            var totalbillUsageofBeforeEconINRM = totalUsageInRM - econusageROOM1RM - econusageROOM2RM - econusageROOM3;
            var totalbillUsageofBeforeEconINRM_Per_Room = totalbillUsageofBeforeEconINRM / 3;

            var totaltopayroom1 = totalbillUsageofBeforeEconINRM_Per_Room + econusageROOM1RM;
            var totaltopayroom2 = totalbillUsageofBeforeEconINRM_Per_Room + econusageROOM2RM;
            var totaltopayroom3 = totalbillUsageofBeforeEconINRM_Per_Room + econusageROOM3RM;

            var sumtopay = totaltopayroom1 + totaltopayroom2 + totaltopayroom3;
            
            cleartext();
            inserttext("-------------------------------------")
            inserttext("bill amount: RM" + totalUsageInRM)
            inserttext("RM 0.175 = " + rate1usage + "UNITS")
            inserttext("RM 0.185 = " + rate2usage + "UNITS")
            inserttext("RM 0.330 = " + rate3usage + "UNITS")
            inserttext("RM 0.445 = " + rate4usage + "UNITS")
            inserttext("RM 0.450 = " + rate5usage + "UNITS")

            inserttext("total Actual Usage Base On Rate: RM" + totalKWHUsageInRM)

            inserttext("total Actual Usage Base On Rate after Discount " + discountrate + "% : RM" + totalKWHUsageInRMAfterDiscount)
            inserttext("service tax: RM" + servicetax);
            inserttext("----------------ECON USAGE---------------------")

            inserttext("Econ Reading Room 1: " + lastnumroom1 + " --> " + nownumroom1);
            inserttext("Econ Reading Room 2: " + lastnumroom2 + " --> " + nownumroom2);
            inserttext("Econ Reading Room 3: " + lastnumroom3 + " --> " + nownumroom3);

            inserttext("Econ Rate Per Unit : RM" +  rate4_and_rate5_total_averagePricePerUnit);
            inserttext("UNIT USAGE (KWH):" + "ROOM 1 =" + econusageROOM1 + " , ROOM 2 =" + econusageROOM2 + ", ROOM 3 =" + econusageROOM3);

            inserttext("Econ Room 1 usage: RM" + econusageROOM1RM);
            inserttext("Econ Room 2 usage: RM" + econusageROOM2RM);
            inserttext("Econ Room 3 usage: RM" + econusageROOM3RM);
            inserttext("----------------Normal USAGE---------------------")
            inserttext("Total Usage Without Econ: RM" + totalbillUsageofBeforeEconINRM);
            inserttext("Usage Without Econ Per Room: RM" + totalbillUsageofBeforeEconINRM_Per_Room);
            inserttext("----------------Total To paid---------------------")
            inserttext("Total To Paid for ROOM 1 : RM " + totaltopayroom1);
            inserttext("Total To Paid for ROOM 2 : RM " + totaltopayroom2);
            inserttext("Total To Paid for ROOM 3 : RM " + totaltopayroom3);

            inserttext("sum amount to pay after calculation: RM " + sumtopay + "/" + totalUsageInRM);








        }

        function inserttext(text) {

            var oldtext = document.getElementById('textareadiv').innerHTML;

            document.getElementById('textareadiv').innerHTML = oldtext + '<br>' + text;
        }
        
         function cleartext() {

        
            document.getElementById('textareadiv').innerHTML = "";
        }


        function startcal() {

            var totalUsageInRM1 = document.getElementById('billamount').value
            var rate1usage1 = document.getElementById('rate1').value
            var rate2usage1 = document.getElementById('rate2').value
            var rate3usage1 = document.getElementById('rate3').value
            var rate4usage1 = document.getElementById('rate4').value
            var rate5usage1 = document.getElementById('rate5').value
            var discountrate1 = document.getElementById('dr').value
            var lastnumroom11 = document.getElementById('r11').value
            var nownumroom11 = document.getElementById('r12').value
            var lastnumroom21 = document.getElementById('r21').value
            var nownumroom21 = document.getElementById('r22').value
            var lastnumroom31 = document.getElementById('r31').value
            var nownumroom31 = document.getElementById('r32').value
calculate(totalUsageInRM1, rate1usage1, rate2usage1, rate3usage1, rate4usage1, rate5usage1, discountrate1, lastnumroom11, nownumroom11, lastnumroom21, nownumroom21, lastnumroom31, nownumroom31)
            //calculate(254.95, 107, 106, 107, 231, 179, 5, 0, 90, 0, 24, 0, 0);
            

        }
    </script>
</head>


<body>
    
    <h2>F-3F-16 Electric Bill Calculator</h2>

    <label for="fname">Bill Amount (RM):</label>
    <input type="number" id="billamount">
    <br><br>
    <label for="fname">RM 0.175 UNIT USAGE:</label>
    <input type="number" id="rate1"><br><br>
    <label for="fname">RM 0.185 UNIT USAGE:</label>
    <input type="number" id="rate2"><br><br>
    <label for="fname">RM 0.330 UNIT USAGE:</label>
    <input type="number" id="rate3"><br><br>
    <label for="fname">RM 0.445 UNIT USAGE:</label>
    <input type="number" id="rate4"><br><br>
    <label for="fname">RM 0.450 UNIT USAGE:</label>
    <input type="number" id="rate5"><br><br>
    <label for="fname">Discount Rate (%):</label>
    <input type="number" id="dr"><br><br>
    <label for="fname">ROOM 1 ECON Last Number:</label>
    <input type="number" id="r11"><br><br>
    <label for="fname">ROOM 1 ECON Now Number:</label>
    <input type="number" id="r12"><br><br>

    <label for="fname">ROOM 2 ECON Last Number:</label>
    <input type="number" id="r21"><br><br>
    <label for="fname">ROOM 2 ECON Now Number:</label>
    <input type="number" id="r22"><br><br>

    <label for="fname">ROOM 3 ECON Last Number:</label>
    <input type="number" id="r31"><br><br>
    <label for="fname">ROOM 3 ECON Now Number:</label>
    <input type="number" id="r32"><br><br>
 <button type="button" onclick="startcal()">calculate</button>

    <span id="textareadiv">

    </span>
    <br>

   
</body></html>

